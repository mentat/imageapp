(function(c){var a={};function b(){var d;try{d=navigator.plugins["Shockwave Flash"];d=d.description}catch(f){try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){d="0.0"}}d=d.match(/\d+/g);return parseFloat(d[0]+"."+d[1])}c.flash={trigger:function(f,d,e){setTimeout(function(){var j=a[f],h,g;if(j){j.trigger("Flash:"+d,e)}},0)}};c.runtimes.Flash=c.addRuntime("flash",{init:function(g,l){var k,f,h,e,m=0,d=document.body;if(b()<10){l({success:false});return}a[g.id]=g;k=document.getElementById(g.settings.browse_button);f=document.createElement("div");f.id=g.id+"_flash_container";c.extend(f.style,{position:"absolute",top:"0px",background:g.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",height:"100%"});f.className="plupload flash";if(g.settings.container){d=document.getElementById(g.settings.container);d.style.position="relative"}d.appendChild(f);h="id="+escape(g.id);f.innerHTML='<object id="'+g.id+'_flash" width="100%" height="100%" style="outline:0" type="application/x-shockwave-flash" data="'+g.settings.flash_swf_url+'"><param name="movie" value="'+g.settings.flash_swf_url+'" /><param name="flashvars" value="'+h+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';function j(){return document.getElementById(g.id+"_flash")}function i(){if(m++>5000){l({success:false});return}if(!e){setTimeout(i,1)}}i();k=f=null;g.bind("Flash:Init",function(){var r={},p,q=g.settings.filters,o=g.settings.resize||{},n={};e=true;for(p=0;p<q.length;p++){q[p].extensions="*."+q[p].extensions.replace(/,/g,";*.")}j().setFileFilters(q,g.settings.multi_selection);if(!g.settings.multipart){n.name=file.target_name||file.name}g.bind("UploadFile",function(s,t){var u=s.settings;j().uploadFile(r[t.id],c.buildUrl(u.url,n),{chunk_size:u.chunk_size,width:o.width,height:o.height,quality:o.quality||90,multipart:u.multipart,multipart_params:u.multipart_params,file_data_name:u.file_data_name,format:/\.(jpg|jpeg)$/i.test(t.name)?"jpg":"png"})});g.bind("Flash:UploadProcess",function(t,s){var u=t.getFile(r[s.id]);if(u.status!=c.FAILED){u.loaded=s.loaded;u.size=s.size;t.trigger("UploadProgress",u)}});g.bind("Flash:UploadChunkComplete",function(s,u){var v,t=s.getFile(r[u.id]);v={chunk:u.chunk,chunks:u.chunks,response:u.text};s.trigger("ChunkUploaded",t,v);if(t.status!=c.FAILED){j().uploadNextChunk()}if(u.chunk==u.chunks-1){t.status=c.DONE;s.trigger("FileUploaded",t,{response:u.text})}});g.bind("Flash:SelectFiles",function(s,v){var u,t,w=[],x;for(t=0;t<v.length;t++){u=v[t];x=c.guid();r[x]=u.id;r[u.id]=x;w.push(new c.File(x,u.name,u.size))}if(w.length){g.trigger("FilesAdded",w)}});g.bind("Flash:SecurityError",function(s,t){g.trigger("Error",{code:c.SECURITY_ERROR,message:"Security error.",details:t.message,file:g.getFile(r[t.id])})});g.bind("Flash:GenericError",function(s,t){g.trigger("Error",{code:c.GENERIC_ERROR,message:"Generic error.",details:t.message,file:g.getFile(r[t.id])})});g.bind("Flash:IOError",function(s,t){g.trigger("Error",{code:c.IO_ERROR,message:"IO error.",details:t.message,file:g.getFile(r[t.id])})});g.bind("QueueChanged",function(s){g.refresh()});g.bind("FilesRemoved",function(s,u){var t;for(t=0;t<u.length;t++){j().removeFile(r[u[t].id])}});g.bind("StateChanged",function(s){g.refresh()});g.bind("Refresh",function(s){var t,u,v;t=document.getElementById(s.settings.browse_button);u=c.getPos(t,document.getElementById(s.settings.container));v=c.getSize(t);c.extend(document.getElementById(s.id+"_flash_container").style,{top:u.y+"px",left:u.x+"px",width:v.w+"px",height:v.h+"px"})});l({success:true})})}})})(plupload);